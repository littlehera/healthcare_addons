[
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Sales Invoice",
  "enabled": 1,
  "modified": "2023-09-22 18:29:53.423753",
  "module": "Healthcare Add-ons",
  "name": "Sales Invoice - Healthcare Add-ons",
  "script": "frappe.ui.form.on('Sales Invoice', {\n\trefresh(frm) {\n\t\t// your code here\n\t}\n})\n\nfrappe.ui.form.on('Sales Invoice', 'ref_practitioner', function(frm){\n    if(frm.doc.ref_practitioner)\n        frappe.call({\n            \"method\": \"frappe.client.get\",\n            \"args\":{\n                doctype: \"Healthcare Practitioner\",\n                name: frm.doc.ref_practitioner\n            },\n            \"callback\":function(data){\n                var practitioner_type = data.message['custom_type'];\n                var practitioner_name = data.message['practitioner_name'];\n                if(practitioner_type == 'Doctor (MD)'){\n                    practitioner_name += ', MD';\n                }\n                frm.set_value(\"custom_practitioner_name\",practitioner_name);\n            }\n        });\n});\n\nfrappe.ui.form.on('Sales Invoice', 'custom_source', function(frm){\n   var si_source = frm.doc.custom_source;\n   if(si_source.includes(\"SC/PWD\")){\n        frm.set_value(\"additional_discount_percentage\",20);\n   }\n   else{\n       frm.set_value(\"additional_discount_percentage\",0);\n   }\n});\n\nfrappe.ui.form.on('Sales Invoice', 'custom_hmo', function(frm){\n    if(frm.doc.custom_hmo)\n        frappe.call({\n            \"method\": \"frappe.client.get\",\n            \"args\":{\n                doctype: \"HMO\",\n                name: frm.doc.custom_hmo\n            },\n            \"callback\":function(data){\n                var price_list = data.message['price_list'];\n                \n                frm.set_value(\"selling_price_list\",price_list);\n            }\n        });\n});\n\nfrappe.ui.form.on(\"Sales Invoice\", \"custom_source\", function(frm) {\n        practitioner_set_query(frm);\n    \n});\n\nfunction practitioner_set_query(frm){\n    \n    var filters = {};\n    \n    if(frm.doc.custom_source.includes(\"Doctor's Referral\")){\n        filters = {\"custom_type\": \"Doctor (MD)\"}\n    }\n\n    frm.set_query(\"ref_practitioner\", function() {\n        return {\n            \"filters\": filters\n        };\n    });\n}",
  "view": "Form"
 }
]